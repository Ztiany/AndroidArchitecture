buildscript {

    apply from: 'config/dependencies.gradle'

    repositories {
        jcenter()
        maven {
            url 'https://maven.google.com/'
            name 'Google'
        }
        google()
    }

    dependencies {
        classpath 'com.android.tools.build:gradle:3.2.0'
        classpath 'org.jetbrains.kotlin:kotlin-gradle-plugin:1.2.60'
    }
}

allprojects {
    repositories {
        jcenter()
        maven { url 'https://dl.google.com/dl/android/maven2/' }
        maven {
            url 'https://jitpack.io'
        }
        google()
        maven {
            url 'https://maven.google.com/'
            name 'Google'
        }
    }
}

task clean(type: Delete) {
    delete rootProject.buildDir
}

//加载配置信息
ext {
    //加载版本信息
    File buildFile = file('config/build.properties')
    Properties buildProperties = new Properties()
    buildFile.withInputStream {
        buildProperties.load(it)
    }
    minSdkVersion = buildProperties.getProperty('minSdkVersion').toInteger()
    targetSdkVersion = buildProperties.getProperty('targetSdkVersion').toInteger()
    compileSdkVersion = buildProperties.getProperty('compileSdkVersion').toInteger()
    buildToolsVersion = buildProperties.getProperty('buildToolsVersion')

    versionCode = buildProperties.getProperty('versionCode').toInteger()
    versionName = buildProperties.getProperty('versionName')

    //加载打包key信息
    File releaseFile = file('config/release.properties')
    Properties releaseProperties = new Properties()
    releaseFile.withInputStream {
        releaseProperties.load(it)
    }

    releaseKeyAlias = releaseProperties.getProperty('keyAlias')
    releaseKeyPassword = releaseProperties.getProperty('keyPassword')
    releaseStoreFile =   file(releaseProperties.getProperty('storeFile')).getAbsolutePath()
    releaseStorePassword = releaseProperties.getProperty('storePassword')

    println("releaseKeyAlias $releaseKeyAlias")
    println("releaseKeyPassword $releaseKeyPassword")
    println("releaseStoreFile $releaseStoreFile")
    println("releaseStorePassword $releaseStorePassword")

}
